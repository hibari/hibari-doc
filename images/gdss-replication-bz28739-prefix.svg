<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="600pt" height="796pt" version="1.1" viewBox="0 0 600 796"
 width="600px" height="796px"
 viewBox="0 0 600 796"
 xmlns="http://www.w3.org/2000/svg" shape-rendering="crispEdges"
 stroke-width="1" text-rendering="geometricPrecision">
<polygon fill="white" points="52,7 96,7 96,16 52,16"/>
<text x="75" y="16" textLength="43" font-family="Helvetica" font-size="12" fill="black" text-anchor="middle">

CLIENT
</text>
<polygon fill="white" points="207,7 241,7 241,16 207,16"/>
<text x="225" y="16" textLength="33" font-family="Helvetica" font-size="12" fill="black" text-anchor="middle">

HEAD
</text>
<polygon fill="white" points="351,7 397,7 397,16 351,16"/>
<text x="375" y="16" textLength="45" font-family="Helvetica" font-size="12" fill="black" text-anchor="middle">

MIDDLE
</text>
<polygon fill="white" points="511,7 537,7 537,16 511,16"/>
<text x="525" y="16" textLength="25" font-family="Helvetica" font-size="12" fill="black" text-anchor="middle">

TAIL
</text>
<line x1="75" y1="22" x2="75" y2="39" stroke="black"/>
<line x1="225" y1="22" x2="225" y2="39" stroke="black"/>
<line x1="375" y1="22" x2="375" y2="39" stroke="black"/>
<line x1="525" y1="22" x2="525" y2="39" stroke="black"/>
<line x1="37" y1="27" x2="563" y2="27" stroke="black" stroke-dasharray="2,2"/>
<polygon fill="white" points="267,23 331,23 331,32 267,32"/>
<text x="268" y="32" textLength="62" font-family="Helvetica" font-size="12" fill="black">
D1 = K1,V1
</text>
<line x1="75" y1="39" x2="75" y2="67" stroke="black"/>
<line x1="225" y1="39" x2="225" y2="67" stroke="black"/>
<line x1="375" y1="39" x2="375" y2="67" stroke="black"/>
<line x1="525" y1="39" x2="525" y2="67" stroke="black"/>
<line x1="75" y1="50" x2="225" y2="50" stroke="black"/>
<line x1="225" y1="50" x2="215" y2="56" stroke="black"/>
<polygon fill="white" points="118,40 181,40 181,49 118,49"/>
<text x="119" y="49" textLength="61" font-family="Helvetica" font-size="12" fill="black">
add(K1,V1)
</text>
<line x1="75" y1="67" x2="75" y2="95" stroke="black"/>
<line x1="225" y1="67" x2="225" y2="95" stroke="black"/>
<line x1="375" y1="67" x2="375" y2="95" stroke="black"/>
<line x1="525" y1="67" x2="525" y2="95" stroke="black"/>
<polygon fill="white" points="158,67 292,67 292,89 158,89"/>
<line x1="158" y1="67" x2="292" y2="67" stroke="black"/>
<line x1="158" y1="89" x2="292" y2="89" stroke="black"/>
<line x1="158" y1="67" x2="158" y2="89" stroke="black"/>
<line x1="292" y1="67" x2="292" y2="89" stroke="black"/>
<polygon fill="white" points="167,74 281,74 281,83 167,83"/>
<text x="168" y="83" textLength="112" font-family="Helvetica" font-size="12" fill="black">
replay=D1; down=S1
</text>
<line x1="75" y1="95" x2="75" y2="123" stroke="black"/>
<line x1="225" y1="95" x2="225" y2="123" stroke="black"/>
<line x1="375" y1="95" x2="375" y2="123" stroke="black"/>
<line x1="525" y1="95" x2="525" y2="123" stroke="black"/>
<line x1="225" y1="106" x2="375" y2="106" stroke="black"/>
<line x1="375" y1="106" x2="365" y2="112" stroke="black"/>
<polygon fill="white" points="243,96 356,96 356,105 243,105"/>
<text x="244" y="105" textLength="111" font-family="Helvetica" font-size="12" fill="black">
ch_replay(K1,V1,S1)
</text>
<line x1="75" y1="123" x2="75" y2="151" stroke="black"/>
<line x1="225" y1="123" x2="225" y2="151" stroke="black"/>
<line x1="375" y1="123" x2="375" y2="151" stroke="black"/>
<line x1="525" y1="123" x2="525" y2="151" stroke="black"/>
<polygon fill="white" points="308,123 442,123 442,145 308,145"/>
<line x1="308" y1="123" x2="442" y2="123" stroke="black"/>
<line x1="308" y1="145" x2="442" y2="145" stroke="black"/>
<line x1="308" y1="123" x2="308" y2="145" stroke="black"/>
<line x1="442" y1="123" x2="442" y2="145" stroke="black"/>
<polygon fill="white" points="325,130 424,130 424,139 325,139"/>
<text x="326" y="139" textLength="97" font-family="Helvetica" font-size="12" fill="black">
replay=D1; up=S1
</text>
<line x1="75" y1="151" x2="75" y2="179" stroke="black"/>
<line x1="225" y1="151" x2="225" y2="179" stroke="black"/>
<line x1="375" y1="151" x2="375" y2="179" stroke="black"/>
<line x1="525" y1="151" x2="525" y2="179" stroke="black"/>
<line x1="375" y1="162" x2="525" y2="162" stroke="black"/>
<line x1="525" y1="162" x2="515" y2="168" stroke="black"/>
<polygon fill="white" points="393,152 506,152 506,161 393,161"/>
<text x="394" y="161" textLength="111" font-family="Helvetica" font-size="12" fill="black">
ch_replay(K1,V1,S1)
</text>
<line x1="75" y1="179" x2="75" y2="207" stroke="black"/>
<line x1="225" y1="179" x2="225" y2="207" stroke="black"/>
<line x1="375" y1="179" x2="375" y2="207" stroke="black"/>
<line x1="525" y1="179" x2="525" y2="207" stroke="black"/>
<polygon fill="white" points="458,179 592,179 592,201 458,201"/>
<line x1="458" y1="179" x2="592" y2="179" stroke="black"/>
<line x1="458" y1="201" x2="592" y2="201" stroke="black"/>
<line x1="458" y1="179" x2="458" y2="201" stroke="black"/>
<line x1="592" y1="179" x2="592" y2="201" stroke="black"/>
<polygon fill="white" points="475,186 574,186 574,195 475,195"/>
<text x="476" y="195" textLength="97" font-family="Helvetica" font-size="12" fill="black">
replay=D1; up=S1
</text>
<line x1="75" y1="207" x2="75" y2="235" stroke="black"/>
<line x1="225" y1="207" x2="225" y2="235" stroke="black"/>
<line x1="375" y1="207" x2="375" y2="235" stroke="black"/>
<line x1="525" y1="207" x2="525" y2="235" stroke="black"/>
<line x1="525" y1="218" x2="75" y2="218" stroke="black"/>
<line x1="75" y1="218" x2="85" y2="224" stroke="black"/>
<polygon fill="white" points="292,208 307,208 307,217 292,217"/>
<text x="293" y="217" textLength="13" font-family="Helvetica" font-size="12" fill="black">
ok
</text>
<line x1="75" y1="235" x2="75" y2="252" stroke="black"/>
<line x1="225" y1="235" x2="225" y2="252" stroke="black"/>
<line x1="375" y1="235" x2="375" y2="252" stroke="black"/>
<line x1="525" y1="235" x2="525" y2="252" stroke="black"/>
<line x1="37" y1="240" x2="563" y2="240" stroke="black" stroke-dasharray="2,2"/>
<polygon fill="white" points="202,236 396,236 396,245 202,245"/>
<text x="203" y="245" textLength="192" font-family="Helvetica" font-size="12" fill="black">
D2 is lost between Head and Middle
</text>
<line x1="75" y1="252" x2="75" y2="280" stroke="black"/>
<line x1="225" y1="252" x2="225" y2="280" stroke="black"/>
<line x1="375" y1="252" x2="375" y2="280" stroke="black"/>
<line x1="525" y1="252" x2="525" y2="280" stroke="black"/>
<line x1="75" y1="263" x2="225" y2="263" stroke="black"/>
<line x1="225" y1="263" x2="215" y2="269" stroke="black"/>
<polygon fill="white" points="118,253 181,253 181,262 118,262"/>
<text x="119" y="262" textLength="61" font-family="Helvetica" font-size="12" fill="black">
add(K2,V2)
</text>
<line x1="75" y1="280" x2="75" y2="308" stroke="black"/>
<line x1="225" y1="280" x2="225" y2="308" stroke="black"/>
<line x1="375" y1="280" x2="375" y2="308" stroke="black"/>
<line x1="525" y1="280" x2="525" y2="308" stroke="black"/>
<polygon fill="white" points="158,280 292,280 292,302 158,302"/>
<line x1="158" y1="280" x2="292" y2="280" stroke="black"/>
<line x1="158" y1="302" x2="292" y2="302" stroke="black"/>
<line x1="158" y1="280" x2="158" y2="302" stroke="black"/>
<line x1="292" y1="280" x2="292" y2="302" stroke="black"/>
<polygon fill="white" points="185,281 264,281 264,290 185,290"/>
<text x="186" y="290" textLength="77" font-family="Helvetica" font-size="12" fill="black">
replay=D1,D2;
</text>
<polygon fill="white" points="198,292 250,292 250,301 198,301"/>
<text x="199" y="301" textLength="50" font-family="Helvetica" font-size="12" fill="black">
down=S2
</text>
<line x1="75" y1="308" x2="75" y2="336" stroke="black"/>
<line x1="225" y1="308" x2="225" y2="336" stroke="black"/>
<line x1="375" y1="308" x2="375" y2="336" stroke="black"/>
<line x1="525" y1="308" x2="525" y2="336" stroke="black"/>
<line x1="225" y1="318" x2="375" y2="318" stroke="black"/>
<line x1="225" y1="320" x2="375" y2="320" stroke="black"/>
<polygon fill="black" points="375,319 365,325 365,313"/>
<polygon fill="white" points="193,309 406,309 406,318 193,318"/>
<text x="194" y="318" textLength="211" font-family="Helvetica" font-size="12" fill="black">
MESSAGE LOST: ch_replay(K2,V2,S2)
</text>
<line x1="75" y1="336" x2="75" y2="353" stroke="black" stroke-dasharray="2,2"/>
<line x1="225" y1="336" x2="225" y2="353" stroke="black" stroke-dasharray="2,2"/>
<line x1="375" y1="336" x2="375" y2="353" stroke="black" stroke-dasharray="2,2"/>
<line x1="525" y1="336" x2="525" y2="353" stroke="black" stroke-dasharray="2,2"/>
<line x1="75" y1="353" x2="75" y2="381" stroke="black"/>
<line x1="225" y1="353" x2="225" y2="381" stroke="black"/>
<line x1="375" y1="353" x2="375" y2="381" stroke="black"/>
<line x1="525" y1="353" x2="525" y2="381" stroke="black"/>
<path d="M 75 370 A73,6 0 0,1 75,358" stroke="black" fill="none"/><line x1="75" y1="370" x2="65" y2="376" stroke="black"/>
<polygon fill="white" points="75,354 116,354 116,363 75,363"/>
<text x="76" y="363" textLength="39" font-family="Helvetica" font-size="12" fill="black">
timeout
</text>
<line x1="75" y1="381" x2="75" y2="398" stroke="black"/>
<line x1="225" y1="381" x2="225" y2="398" stroke="black"/>
<line x1="375" y1="381" x2="375" y2="398" stroke="black"/>
<line x1="525" y1="381" x2="525" y2="398" stroke="black"/>
<line x1="37" y1="386" x2="563" y2="386" stroke="black" stroke-dasharray="2,2"/>
<polygon fill="white" points="267,382 331,382 331,391 267,391"/>
<text x="268" y="391" textLength="62" font-family="Helvetica" font-size="12" fill="black">
D3 = K3,V3
</text>
<line x1="75" y1="398" x2="75" y2="426" stroke="black"/>
<line x1="225" y1="398" x2="225" y2="426" stroke="black"/>
<line x1="375" y1="398" x2="375" y2="426" stroke="black"/>
<line x1="525" y1="398" x2="525" y2="426" stroke="black"/>
<line x1="75" y1="409" x2="225" y2="409" stroke="black"/>
<line x1="225" y1="409" x2="215" y2="415" stroke="black"/>
<polygon fill="white" points="118,399 181,399 181,408 118,408"/>
<text x="119" y="408" textLength="61" font-family="Helvetica" font-size="12" fill="black">
add(K3,V3)
</text>
<line x1="75" y1="426" x2="75" y2="454" stroke="black"/>
<line x1="225" y1="426" x2="225" y2="454" stroke="black"/>
<line x1="375" y1="426" x2="375" y2="454" stroke="black"/>
<line x1="525" y1="426" x2="525" y2="454" stroke="black"/>
<polygon fill="white" points="158,426 292,426 292,448 158,448"/>
<line x1="158" y1="426" x2="292" y2="426" stroke="black"/>
<line x1="158" y1="448" x2="292" y2="448" stroke="black"/>
<line x1="158" y1="426" x2="158" y2="448" stroke="black"/>
<line x1="292" y1="426" x2="292" y2="448" stroke="black"/>
<polygon fill="white" points="175,427 273,427 273,436 175,436"/>
<text x="176" y="436" textLength="96" font-family="Helvetica" font-size="12" fill="black">
replay=D1,D2,D3;
</text>
<polygon fill="white" points="198,438 250,438 250,447 198,447"/>
<text x="199" y="447" textLength="50" font-family="Helvetica" font-size="12" fill="black">
down=S3
</text>
<line x1="75" y1="454" x2="75" y2="482" stroke="black"/>
<line x1="225" y1="454" x2="225" y2="482" stroke="black"/>
<line x1="375" y1="454" x2="375" y2="482" stroke="black"/>
<line x1="525" y1="454" x2="525" y2="482" stroke="black"/>
<line x1="225" y1="465" x2="375" y2="465" stroke="black"/>
<line x1="375" y1="465" x2="365" y2="471" stroke="black"/>
<polygon fill="white" points="243,455 356,455 356,464 243,464"/>
<text x="244" y="464" textLength="111" font-family="Helvetica" font-size="12" fill="black">
ch_replay(K3,V3,S3)
</text>
<line x1="75" y1="482" x2="75" y2="510" stroke="black"/>
<line x1="225" y1="482" x2="225" y2="510" stroke="black"/>
<line x1="375" y1="482" x2="375" y2="510" stroke="black"/>
<line x1="525" y1="482" x2="525" y2="510" stroke="black"/>
<polygon fill="white" points="308,482 442,482 442,504 308,504"/>
<line x1="308" y1="482" x2="442" y2="482" stroke="black"/>
<line x1="308" y1="504" x2="442" y2="504" stroke="black"/>
<line x1="308" y1="482" x2="308" y2="504" stroke="black"/>
<line x1="442" y1="482" x2="442" y2="504" stroke="black"/>
<polygon fill="white" points="316,489 433,489 433,498 316,498"/>
<text x="317" y="498" textLength="115" font-family="Helvetica" font-size="12" fill="black">
replay=D1,D3; up=S3
</text>
<line x1="75" y1="510" x2="75" y2="538" stroke="black"/>
<line x1="225" y1="510" x2="225" y2="538" stroke="black"/>
<line x1="375" y1="510" x2="375" y2="538" stroke="black"/>
<line x1="525" y1="510" x2="525" y2="538" stroke="black"/>
<line x1="375" y1="521" x2="525" y2="521" stroke="black"/>
<line x1="525" y1="521" x2="515" y2="527" stroke="black"/>
<polygon fill="white" points="393,511 506,511 506,520 393,520"/>
<text x="394" y="520" textLength="111" font-family="Helvetica" font-size="12" fill="black">
ch_replay(K3,V3,S3)
</text>
<line x1="75" y1="538" x2="75" y2="566" stroke="black"/>
<line x1="225" y1="538" x2="225" y2="566" stroke="black"/>
<line x1="375" y1="538" x2="375" y2="566" stroke="black"/>
<line x1="525" y1="538" x2="525" y2="566" stroke="black"/>
<polygon fill="white" points="458,538 592,538 592,560 458,560"/>
<line x1="458" y1="538" x2="592" y2="538" stroke="black"/>
<line x1="458" y1="560" x2="592" y2="560" stroke="black"/>
<line x1="458" y1="538" x2="458" y2="560" stroke="black"/>
<line x1="592" y1="538" x2="592" y2="560" stroke="black"/>
<polygon fill="white" points="466,545 583,545 583,554 466,554"/>
<text x="467" y="554" textLength="115" font-family="Helvetica" font-size="12" fill="black">
replay=D1,D3; up=S3
</text>
<line x1="75" y1="566" x2="75" y2="594" stroke="black"/>
<line x1="225" y1="566" x2="225" y2="594" stroke="black"/>
<line x1="375" y1="566" x2="375" y2="594" stroke="black"/>
<line x1="525" y1="566" x2="525" y2="594" stroke="black"/>
<line x1="525" y1="577" x2="75" y2="577" stroke="black"/>
<line x1="75" y1="577" x2="85" y2="583" stroke="black"/>
<polygon fill="white" points="292,567 307,567 307,576 292,576"/>
<text x="293" y="576" textLength="13" font-family="Helvetica" font-size="12" fill="black">
ok
</text>
<line x1="75" y1="594" x2="75" y2="611" stroke="black"/>
<line x1="225" y1="594" x2="225" y2="611" stroke="black"/>
<line x1="375" y1="594" x2="375" y2="611" stroke="black"/>
<line x1="525" y1="594" x2="525" y2="611" stroke="black"/>
<line x1="37" y1="599" x2="563" y2="599" stroke="black" stroke-dasharray="2,2"/>
<polygon fill="white" points="266,595 333,595 333,604 266,604"/>
<text x="267" y="604" textLength="65" font-family="Helvetica" font-size="12" fill="black">
tail acks S3.
</text>
<line x1="75" y1="611" x2="75" y2="639" stroke="black"/>
<line x1="225" y1="611" x2="225" y2="639" stroke="black"/>
<line x1="375" y1="611" x2="375" y2="639" stroke="black"/>
<line x1="525" y1="611" x2="525" y2="639" stroke="black"/>
<path d="M 525 616 A75,6 0 0,1 525,628" stroke="black" fill="none"/><line x1="525" y1="628" x2="535" y2="634" stroke="black"/>
<polygon fill="white" points="486,612 523,612 523,621 486,621"/>
<text x="487" y="621" textLength="35" font-family="Helvetica" font-size="12" fill="black">
timer()
</text>
<line x1="75" y1="639" x2="75" y2="667" stroke="black"/>
<line x1="225" y1="639" x2="225" y2="667" stroke="black"/>
<line x1="375" y1="639" x2="375" y2="667" stroke="black"/>
<line x1="525" y1="639" x2="525" y2="667" stroke="black"/>
<polygon fill="white" points="458,639 592,639 592,661 458,661"/>
<line x1="458" y1="639" x2="592" y2="639" stroke="black"/>
<line x1="458" y1="661" x2="592" y2="661" stroke="black"/>
<line x1="458" y1="639" x2="458" y2="661" stroke="black"/>
<line x1="592" y1="639" x2="592" y2="661" stroke="black"/>
<polygon fill="white" points="481,646 568,646 568,655 481,655"/>
<text x="482" y="655" textLength="85" font-family="Helvetica" font-size="12" fill="black">
replay= ; up=S3
</text>
<line x1="75" y1="667" x2="75" y2="695" stroke="black"/>
<line x1="225" y1="667" x2="225" y2="695" stroke="black"/>
<line x1="375" y1="667" x2="375" y2="695" stroke="black"/>
<line x1="525" y1="667" x2="525" y2="695" stroke="black"/>
<line x1="525" y1="678" x2="375" y2="678" stroke="black"/>
<line x1="375" y1="678" x2="385" y2="684" stroke="black"/>
<polygon fill="white" points="428,668 471,668 471,677 428,677"/>
<text x="429" y="677" textLength="41" font-family="Helvetica" font-size="12" fill="black">
ack(S3)
</text>
<line x1="75" y1="695" x2="75" y2="723" stroke="black"/>
<line x1="225" y1="695" x2="225" y2="723" stroke="black"/>
<line x1="375" y1="695" x2="375" y2="723" stroke="black"/>
<line x1="525" y1="695" x2="525" y2="723" stroke="black"/>
<polygon fill="white" points="308,695 442,695 442,717 308,717"/>
<line x1="308" y1="695" x2="442" y2="695" stroke="black"/>
<line x1="308" y1="717" x2="442" y2="717" stroke="black"/>
<line x1="308" y1="695" x2="308" y2="717" stroke="black"/>
<line x1="442" y1="695" x2="442" y2="717" stroke="black"/>
<polygon fill="white" points="331,702 418,702 418,711 331,711"/>
<text x="332" y="711" textLength="85" font-family="Helvetica" font-size="12" fill="black">
replay= ; up=S3
</text>
<line x1="75" y1="723" x2="75" y2="751" stroke="black"/>
<line x1="225" y1="723" x2="225" y2="751" stroke="black"/>
<line x1="375" y1="723" x2="375" y2="751" stroke="black"/>
<line x1="525" y1="723" x2="525" y2="751" stroke="black"/>
<line x1="375" y1="734" x2="225" y2="734" stroke="black"/>
<line x1="225" y1="734" x2="235" y2="740" stroke="black"/>
<polygon fill="white" points="278,724 321,724 321,733 278,733"/>
<text x="279" y="733" textLength="41" font-family="Helvetica" font-size="12" fill="black">
ack(S3)
</text>
<line x1="75" y1="751" x2="75" y2="779" stroke="black"/>
<line x1="225" y1="751" x2="225" y2="779" stroke="black"/>
<line x1="375" y1="751" x2="375" y2="779" stroke="black"/>
<line x1="525" y1="751" x2="525" y2="779" stroke="black"/>
<polygon fill="white" points="158,751 292,751 292,773 158,773"/>
<line x1="158" y1="751" x2="292" y2="751" stroke="black"/>
<line x1="158" y1="773" x2="292" y2="773" stroke="black"/>
<line x1="158" y1="751" x2="158" y2="773" stroke="black"/>
<line x1="292" y1="751" x2="292" y2="773" stroke="black"/>
<polygon fill="white" points="173,758 275,758 275,767 173,767"/>
<text x="174" y="767" textLength="100" font-family="Helvetica" font-size="12" fill="black">
replay= ; down=S3
</text>
<line x1="75" y1="779" x2="75" y2="796" stroke="black"/>
<line x1="225" y1="779" x2="225" y2="796" stroke="black"/>
<line x1="375" y1="779" x2="375" y2="796" stroke="black"/>
<line x1="525" y1="779" x2="525" y2="796" stroke="black"/>
<line x1="37" y1="784" x2="563" y2="784" stroke="black" stroke-dasharray="2,2"/>
<polygon fill="white" points="148,780 451,780 451,789 148,789"/>
<text x="149" y="789" textLength="301" font-family="Helvetica" font-size="12" fill="black">
HEAD has D1,D2,D3 but MIDDLE&amp;TAIL are missing D2.
</text>
<line x1="75" y1="790" x2="75" y2="796" stroke="black"/>
<line x1="225" y1="790" x2="225" y2="796" stroke="black"/>
<line x1="375" y1="790" x2="375" y2="796" stroke="black"/>
<line x1="525" y1="790" x2="525" y2="796" stroke="black"/>
</svg>
